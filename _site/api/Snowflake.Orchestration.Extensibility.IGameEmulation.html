<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Interface IGameEmulation
   | Snowflake Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Interface IGameEmulation
   | Snowflake Documentation ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
    <link rel="stylesheet" href="../styles/theme.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <header class="navbar navbar-expand navbar-light flex-column flex-md-row bd-navbar bg-primary">
          <a class="navbar-brand mr-0 mr-md-2" aria-label="Snowflake" href="https://snowflakepowe.red"><img src="/svg/banner.svg" style="height:63px;width:300px;pointer-events:none;padding:0;margin:0"></a>
          <div class="container flex-md-row flex-column">
            <div class="navbar-nav-scroll mr-md-auto" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
           
            <div class="navbar-nav-scroll ml-md-auto">
                <ul class="navbar-nav bd-navbar-nav">
                  <li class="nav-item"><a class="nav-link" href="https://snowflakepowe.red">Home</a></li>
                  <li class="nav-item"><a class="nav-link" href="https://snowflakepowe.red/blog/">Blog</a></li>
                  <li class="nav-item active"><a class="nav-link" href="/">Docs</a></li>
                  <li class="nav-item"><a class="nav-link" href="https://github.com/SnowflakePowered">GitHub</a></li>
                </ul>
            </div>
           </div>
        </header>      </header>
      <div role="main" class="container-fluid body-content hide-when-search">
        
         <div class="container-fluid hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>      <div class="container-fluid" style="display: flex;">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
            <div class="col-md-10">
              <article class="content wrap" id="_content" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation">
  
  
  <h1 id="Snowflake_Orchestration_Extensibility_IGameEmulation" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation" class="text-break">Interface IGameEmulation
  </h1>
  <div class="markdown level0 summary"><p>A single instance of emulation for a specific <a class="xref" href="Snowflake.Model.Game.IGame.html">IGame</a>,
with a specific combination of configuration, input, and initial save game state.</p>
<p>A <a class="xref" href="Snowflake.Orchestration.Extensibility.IGameEmulation.html">IGameEmulation</a> implementation is specific to the <a class="xref" href="Snowflake.Orchestration.Extensibility.IEmulatorOrchestrator.html">IEmulatorOrchestrator</a>
that produces it, and is responsible for handling the entire lifecycle of an emulation instance.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Snowflake.Orchestration.Extensibility.html">Snowflake.Orchestration.Extensibility</a></h6>
  <h6><strong>Assembly</strong>: Snowflake.Framework.Primitives.dll</h6>
  <h5 id="Snowflake_Orchestration_Extensibility_IGameEmulation_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public interface IGameEmulation</code></pre>
  </div>
  <h3 id="properties">Properties
  </h3>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_ControllerPorts_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.ControllerPorts*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_ControllerPorts" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.ControllerPorts">ControllerPorts</h4>
  <div class="markdown level1 summary"><p>A list of <a class="xref" href="Snowflake.Orchestration.Extensibility.IEmulatedController.html">IEmulatedController</a> that representes the input devices that will be used
in this emulation instance.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IEnumerable&lt;IEmulatedController&gt; ControllerPorts { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Snowflake.Orchestration.Extensibility.IEmulatedController.html">IEmulatedController</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_EmulationState_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.EmulationState*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_EmulationState" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.EmulationState">EmulationState</h4>
  <div class="markdown level1 summary"><p>The current state of the game emulation. It is absolutely impervious that
implementations update this accordingly, or the <a class="xref" href="Snowflake.Orchestration.Extensibility.IGameEmulation.html">IGameEmulation</a> will 
not function correctly.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">GameEmulationState EmulationState { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Snowflake.Orchestration.Extensibility.GameEmulationState.html">GameEmulationState</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_Game_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.Game*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_Game" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.Game">Game</h4>
  <div class="markdown level1 summary"><p>The game that is being emulated in this instance.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IGame Game { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Snowflake.Model.Game.IGame.html">IGame</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_SaveProfile_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.SaveProfile*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_SaveProfile" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.SaveProfile">SaveProfile</h4>
  <div class="markdown level1 summary"><p>The initial save game that should be copied into the working directory for this emulation instance.
If this is null, then the implementation is responsible for creating a blank initial save game state
in <a class="xref" href="Snowflake.Orchestration.Extensibility.IGameEmulation.html#Snowflake_Orchestration_Extensibility_IGameEmulation_RestoreSaveGame">RestoreSaveGame()</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">ISaveProfile SaveProfile { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Snowflake.Orchestration.Saving.ISaveProfile.html">ISaveProfile</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_CompileConfiguration_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.CompileConfiguration*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_CompileConfiguration" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.CompileConfiguration">CompileConfiguration()</h4>
  <div class="markdown level1 summary"><p>Compiles relevant configuration into the working directory of the emulation instance, ready for use.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task CompileConfiguration()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td><p>An asynchronous task that signals the completion of the compilation.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_DisposeAsync_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.DisposeAsync*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_DisposeAsync" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.DisposeAsync">DisposeAsync()</h4>
  <div class="markdown level1 summary"><p>Implements <span class="xref">System.IAsyncDisposable</span>.
When disposed, immediately stop the currently running emulation instance, if any,
persist the save, and then clean up the working directory if any.
<p>
This method must be idempotent. Repeated calls must be ignored.
</p></p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">ValueTask DisposeAsync()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.ValueTask</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_PersistSaveGame_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.PersistSaveGame*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_PersistSaveGame" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.PersistSaveGame">PersistSaveGame()</h4>
  <div class="markdown level1 summary"><p>Persists the current state of the game&apos;s save information into a new immutable <a class="xref" href="Snowflake.Orchestration.Saving.ISaveGame.html">ISaveGame</a>
using the current <a class="xref" href="Snowflake.Orchestration.Saving.ISaveProfile.html">ISaveProfile</a>.</p>
<p>This can only be run if the game is not currently running, to avoid race conditions causing data corruption.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;ISaveGame&gt; PersistSaveGame()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<a class="xref" href="Snowflake.Orchestration.Saving.ISaveGame.html">ISaveGame</a>&gt;</td>
        <td><p>A new <a class="xref" href="Snowflake.Orchestration.Saving.ISaveGame.html">ISaveGame</a> with the current contents of the working directory save folder.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_RestoreSaveGame_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.RestoreSaveGame*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_RestoreSaveGame" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.RestoreSaveGame">RestoreSaveGame()</h4>
  <div class="markdown level1 summary"><p>Restores the save into the working directory save folder, or otherwise prepares
the folder for a new game if <a class="xref" href="Snowflake.Orchestration.Extensibility.IGameEmulation.html#Snowflake_Orchestration_Extensibility_IGameEmulation_SaveProfile">SaveProfile</a> is null.
<p>
This method must be idempotent. If the save game restore succeeds, calling this method again must do
nothing.
</p></p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task RestoreSaveGame()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td><p>An asynchronous task that signals the completion of the restore.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_SetupEnvironment_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.SetupEnvironment*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_SetupEnvironment" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.SetupEnvironment">SetupEnvironment()</h4>
  <div class="markdown level1 summary"><p>Run any misceallenous tasks required to prepare the working directory, such as copying BIOS files
to the working directory if necessary.
<p>
This method must be idempotent. If the environment setup succeeds, calling this method again must do
nothing.
</p></p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task SetupEnvironment()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td><p>An asynchronous task that signals the completion of the preparation.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_StartEmulation_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.StartEmulation*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_StartEmulation" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.StartEmulation">StartEmulation()</h4>
  <div class="markdown level1 summary"><p>Begin the emulation instance (run the game).
<p>
This method must be idempotent. Once an emulation has started, this method must return the same cancellation token
for the same process instance in future calls. If the emulation has stopped, this method must do nothing.
</p>
<p>
Implementations of <a class="xref" href="Snowflake.Orchestration.Extensibility.IGameEmulation.html">IGameEmulation</a> may opt to refuse to start if setup is incomplete, and throw
<span class="xref">System.InvalidOperationException</span> if this is the case. Implementations must keep track of the hooks themselves
in a thread-safe manner if they opt to do so.
</p></p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">CancellationToken StartEmulation()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><p>A cancellation token that indicates when the emulation is halted by the user, or programmatically.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.InvalidOperationException</span></td>
        <td><p>If all hooks have not yet been called.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Snowflake_Orchestration_Extensibility_IGameEmulation_StopEmulation_" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.StopEmulation*"></a>
  <h4 id="Snowflake_Orchestration_Extensibility_IGameEmulation_StopEmulation" data-uid="Snowflake.Orchestration.Extensibility.IGameEmulation.StopEmulation">StopEmulation()</h4>
  <div class="markdown level1 summary"><p>As safely as possible, halt the currently running emulation instance forever.
Instead of calling this directly, consider calling <a class="xref" href="Snowflake.Orchestration.Extensibility.IGameEmulation.html#Snowflake_Orchestration_Extensibility_IGameEmulation_DisposeAsync">DisposeAsync()</a> to dispose of the
IGameEmulation instance.
<p>
This method must be idempotent. Once an emulation has stopped, it can never be restarted, and calling this
method again must do nothing. If the emulation has yet to be started, this method must do nothing.
</p></p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task StopEmulation()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td><p>An asynchronous task that signals the completion of the instance halt.</p>
</td>
      </tr>
    </tbody>
  </table>
</article>
            </div>
            
            <div class="hidden-sm col-md-2" role="complementary">
              <div class="sideaffix">
                <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <footer class="footer">
         <div class="container text-left">
            <div>Built with ❤️ by <a href="https://twitter.com/chyyran">@chyyran</a>. Text content licensed under CC-BY-SA 4.0.</div>
         </div>
      </footer>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>  </body>
</html>
